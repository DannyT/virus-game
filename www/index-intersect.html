<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Intersect test</title>
    <script src="phaser/phaser.js"></script>
</head>
<body>
    <script>
    var config = {
        backgroundColor: 0xffffff,
        width: 800,
        height: 600,
        physics: {
            default: 'arcade'
        },
        type: Phaser.AUTO,
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);

    function preload ()
    {
        this.load.image('cow', 'assets/cow.png');
    }

    function create ()
    {
        this.circle1 = new Phaser.Geom.Circle(400, 300, 100);
        this.graphics = this.add.graphics({ lineStyle: { width: 2, color: 0xff2323 }, fillStyle: { color: 0xff00ff } });
        this.graphics.strokeCircleShape(this.circle1);

        Phaser.Physics.Arcade.enable(this.graphics);
        
        this.cow = this.physics.add.sprite(400, 300, 'cow');
        this.randomDir = Phaser.Math.RandomXY(new Phaser.Math.Vector2());
    }

    
    function update()
    {
        // move cow
        this.cow.x += this.randomDir.x;
        this.cow.y += this.randomDir.y;
        
        var cowRect = this.cow.getBounds();
        cowRect.x += cowRect.width/2;
        cowRect.y += cowRect.height/2;
        cowRect.width = 1;
        cowRect.height = 1;
        
        //if(!Phaser.Geom.Intersects.CircleToRectangle(this.circle1, cowRect))
        if(!this.physics.overlap(this.cow, this.circle1))
        {
            this.cow.x -= this.randomDir.x;
            this.cow.y -= this.randomDir.y;
            this.randomDir = Phaser.Math.RandomXY(new Phaser.Math.Vector2());
        }
    }

    </script>
</body>
</html>