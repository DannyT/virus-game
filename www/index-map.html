<!DOCTYPE html>
<html>
<head>
    <!--<script src="//cdn.jsdelivr.net/npm/phaser@3.0.0/dist/phaser.min.js"></script>-->
    <script src="phaser/phaser.js"></script>
</head>
<body>

<script>
var config = {
    width: 800,
    height: 600,
    type: Phaser.AUTO,
    scene: {
        preload: preload,
        create: create,
        update: update
    }
};

var game = new Phaser.Game(config);


function preload ()
{
    this.load.image('background', 'assets/background.png');
    this.load.image('cow', 'assets/cow.png');
}

function create ()
{
    this.add.image(400, 300, 'background');

    // 2 overlapping farm boundaries
    // TODO: refactor
    var graphics = this.add.graphics({ lineStyle: { width: 2, color: 0xff2323 }, fillStyle: { color: 0xff00ff } });

    this.circle1 = new Phaser.Geom.Circle(550, 350, 100);

    function drawCircle (graphics, circle)
    {
        var area = Phaser.Geom.Circle.Area(circle);
        graphics.strokeCircleShape(circle);
    }

    drawCircle(graphics, this.circle1);

    // a lonely cow
    this.cow = this.add.image(550, 350, 'cow');
    this.cow.setScale(0.5);
    this.randomDir = Phaser.Math.RandomXY(new Phaser.Math.Vector2());
}

function update()
{
    // move cow
    this.cow.x += this.randomDir.x;
    this.cow.y += this.randomDir.y;
    if(!Phaser.Geom.Intersects.CircleToRectangle(this.circle1, this.cow.getBounds()))
    {
        this.cow.x -= this.randomDir.x;
        this.cow.y -= this.randomDir.y;
        this.randomDir = Phaser.Math.RandomXY(new Phaser.Math.Vector2());
    }
}

</script>

</body>
</html>